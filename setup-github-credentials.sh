#!/bin/bash

echo "ğŸ”§ Setup GitHub Credentials untuk Jenkins..."

# Konfigurasi GitHub credentials
GITHUB_USERNAME="abudlfalaq5@gmail.com"
GITHUB_TOKEN="[MASUKKAN_GITHUB_TOKEN_DI_SINI]"

echo "ğŸ“‹ Informasi Jenkins:"
echo "ğŸŒ Jenkins UI: http://localhost:9533"
echo "ğŸ‘¤ GitHub Username: $GITHUB_USERNAME"
echo "ğŸ”‘ GitHub Token: $GITHUB_TOKEN"
echo ""

echo "ğŸ“ Langkah-langkah setup GitHub integration:"
echo ""
echo "1ï¸âƒ£ Buka Jenkins UI di browser:"
echo "   http://localhost:9533"
echo ""
echo "2ï¸âƒ£ Install GitHub Plugins:"
echo "   - Manage Jenkins â†’ Manage Plugins"
echo "   - Tab 'Available' â†’ cari dan install:"
echo "     â€¢ GitHub Plugin (plugin utama)"
echo "     â€¢ GitHub Branch Source Plugin"
echo "     â€¢ GitHub Authentication Plugin"
echo "     â€¢ Pipeline: GitHub Plugin"
echo "     â€¢ Git Plugin (jika belum ada)"
echo ""
echo "   ğŸ“ Catatan: GitHub API Plugin biasanya sudah terinstall otomatis"
echo "   sebagai dependensi dari GitHub Plugin."
echo ""
echo "3ï¸âƒ£ Setup GitHub Credentials:"
echo "   - Manage Jenkins â†’ Manage Credentials"
echo "   - System â†’ Global credentials â†’ Add Credentials"
echo "   - Kind: 'Secret text'"
echo "   - Secret: $GITHUB_TOKEN"
echo "   - ID: github-token"
echo "   - Description: GitHub Personal Access Token"
echo ""
echo "4ï¸âƒ£ Konfigurasi GitHub Server:"
echo "   - Manage Jenkins â†’ Configure System"
echo "   - Scroll ke bagian 'GitHub'"
echo "   - Add GitHub Server:"
echo "     â€¢ Name: GitHub"
echo "     â€¢ API URL: https://api.github.com"
echo "     â€¢ Credentials: github-token"
echo "     â€¢ Test connection"
echo ""
echo "5ï¸âƒ£ Setup Webhook (untuk auto-trigger):"
echo "   - Di repository GitHub: Settings â†’ Webhooks â†’ Add webhook"
echo "   - Payload URL: http://[JENKINS_SERVER]:9533/github-webhook/"
echo "   - Content type: application/json"
echo "   - Events: Just the push event"
echo ""
echo "âœ… Setup selesai! Jenkins siap untuk GitHub integration."
echo ""
echo "ğŸ§ª Test dengan membuat Multibranch Pipeline:"
echo "   - New Item â†’ Multibranch Pipeline"
echo "   - Branch Sources: GitHub"
echo "   - Credentials: github-token"
echo "   - Owner: [GitHub username]"
echo "   - Repository: [Repository name]"
